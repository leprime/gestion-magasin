{% extends 'layout.html.twig' %}

{% block title %}Admin | Dashboard{% endblock %}
{% block  bread_crumb %}Tableau de bord{% endblock %}
{% block body %}
    <div class="row">
        <div class="col-md-3">
            <div class="card p-30">
                <div class="media">
                    <div class="media-left media-middle">
                        <span>
                            <i class="fa fa-money f-s-40 color-primary"></i>
                        </span>
                    </div>
                    <div class="media-body media-text-right">
                        <h2>{{ totalSortie }}</h2>
                        <p class="m-b-0">Total sorties</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card p-30">
                <div class="media">
                    <div class="media-left meida media-middle">
                        <span>
                            <i class="fa fa-shopping-cart f-s-40 color-success"></i>
                        </span>
                    </div>
                    <div class="media-body media-text-right">
                        <h2>{{ outputs }}</h2>
                        <p class="m-b-0">Sorties</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card p-30">
                <div class="media">
                    <div class="media-left meida media-middle">
                        <span>
                            <i class="fa fa-archive f-s-40 color-warning"></i>
                        </span>
                    </div>
                    <div class="media-body media-text-right">
                        <h2>{{ nbProducts }}</h2>
                        <p class="m-b-0">Stock</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card p-30">
                <div class="media">
                    <div class="media-left meida media-middle">
                        <span>
                            <i class="fa fa-user f-s-40 color-danger"></i>
                        </span>
                    </div>
                    <div class="media-body media-text-right">
                        <h2>{{ users }}</h2>
                        <p class="m-b-0">Utilisateurs</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-12">
            <div class="card">
                <div class="card-title">
                    <h4>Récentes sorties de produits</h4>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Code</th>
                                    <th>Libellé</th>
                                    <th>Prix</th>
                                    <th>Quantité</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                            {% for ro in recentOutputs %}
                                <tr>
                                    <td>
                                        <div class="round-img">
                                            <a href="javascript:void(0)"><img alt="" src="{{ asset('images_uploaded/' ~ ro.produit.image.file) }}"></a>
                                        </div>
                                    </td>
                                    <td>{{ ro.produit.code }}</td>
                                    <td>
                                        <span>{{ ro.produit.name }}</span>
                                    </td>
                                    <td>
                                        <span>{{ ro.produit.price }} F</span>
                                    </td>
                                    <td>
                                        <span>{{ ro.produit.quantity }}</span>
                                    </td>
                                    <td>
                                        {% if ro.produit.isLendable %}
                                            <span class="badge badge-success">Prêtable</span>
                                        {% else %}
                                            <span class="badge badge-danger">Non prêtable</span>
                                        {% endif %}
                                        {% if ro.produit.isExitPermit %}
                                            <span class="badge badge-success">Sortir</span>
                                        {% else %}
                                            <span class="badge badge-danger">Non sortie</span>
                                        {% endif %}
                                    </td>
                                </tr>
                            {% else %}
                                <tr class="group">
                                    <td colspan="5" class="text-center">Aucun article récent</td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    </div>
{% endblock %}
